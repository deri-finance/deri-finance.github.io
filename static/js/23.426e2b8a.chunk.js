(this["webpackJsonpapp.deri.finance"]=this["webpackJsonpapp.deri.finance"]||[]).push([[23],{625:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(0),a=n.n(r),c=n(1),s=n(16),i=n(7),u=n(60);function o(e){var t=e.btnText,n=e.className,r=e.disabled,o=e.click,l=e.afterClick,d=e.checkApprove,p=e.wallet,b=e.spec,j=e.lang,f=Object(i.useState)(r?"disabled":"enabled"),x=Object(s.a)(f,2),O=x[0],h=x[1],m=Object(i.useState)(!0),g=Object(s.a)(m,2),v=g[0],w=g[1],k=Object(i.useState)(!1),y=Object(s.a)(k,2),N=y[0],S=y[1],T=Object(i.useState)(t),M=Object(s.a)(T,2),A=M[0],I=M[1],E=Object(i.useRef)(null),_=function(){var e=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("enabled"===O){e.next=2;break}return e.abrupt("return");case 2:return R(),e.next=5,o();case 5:e.sent&&l&&l(),F();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){h("disabled"),S(!0),E.current&&(E.current.style.display="inline-block")},F=function(){E.current&&(E.current.style.display="none"),h("enabled"),S(!1)},C=function(){var e=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(d&&p&&p.detail.account)){e.next=5;break}return e.next=3,p.isApproved(b.pool,b.bTokenId);case 3:t=e.sent,w(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(),e.next=3,p.approve(b.pool,b.bTokenId);case 3:e.sent.success?w(!0):(w(!1),alert(j["approve-failed"])),F();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){return C(),function(){}}),[p,b,d]),Object(i.useEffect)((function(){return t&&I(t),function(){}}),[t]),Object(u.jsxs)("button",{className:n,onClick:function(){v?_():D()},children:[Object(u.jsx)("span",{className:"btn-loading-wrap",children:Object(u.jsx)("span",{ref:E,className:"spinner spinner-border spinner-border-sm",style:{display:"none",marginRight:"2"}})}),N?j.pending:v?A:j.approve]})}},629:function(e,t,n){"use strict";function r(e,t){for(var n=e.toString();n.length<t;)n="0"+n;return n}function a(e){return r(e,2)}function c(t,n){"string"!==typeof t&&(n=t,t=e.exports.ISO8601_FORMAT),n||(n=e.exports.now());var c=a(n.getDate()),s=a(n.getMonth()+1),i=a(n.getFullYear()),u=a(i.substring(2,4)),o=t.indexOf("yyyy")>-1?i:u,l=a(n.getHours()),d=a(n.getMinutes()),p=a(n.getSeconds()),b=r(n.getMilliseconds(),3),j=function(e){var t=Math.abs(e),n=String(Math.floor(t/60)),r=String(t%60);return 1===n.length&&(n="0"+n),1===r.length&&(r="0"+r),e<0?"+"+n+r:"-"+n+r}(n.getTimezoneOffset());return t.replace(/dd/g,c).replace(/MM/g,s).replace(/y{1,4}/g,o).replace(/hh/g,l).replace(/mm/g,d).replace(/ss/g,p).replace(/SSS/g,b).replace(/O/g,j)}function s(e,t,n,r){e["set"+(r?"":"UTC")+t](n)}e.exports=c,e.exports.asString=c,e.exports.parse=function(t,n,r){if(!t)throw new Error("pattern must be supplied");return function(t,n,r){var a=t.indexOf("O")<0,c=[{pattern:/y{1,4}/,regexp:"\\d{1,4}",fn:function(e,t){s(e,"FullYear",t,a)}},{pattern:/MM/,regexp:"\\d{1,2}",fn:function(e,t){s(e,"Month",t-1,a)}},{pattern:/dd/,regexp:"\\d{1,2}",fn:function(e,t){s(e,"Date",t,a)}},{pattern:/hh/,regexp:"\\d{1,2}",fn:function(e,t){s(e,"Hours",t,a)}},{pattern:/mm/,regexp:"\\d\\d",fn:function(e,t){s(e,"Minutes",t,a)}},{pattern:/ss/,regexp:"\\d\\d",fn:function(e,t){s(e,"Seconds",t,a)}},{pattern:/SSS/,regexp:"\\d\\d\\d",fn:function(e,t){s(e,"Milliseconds",t,a)}},{pattern:/O/,regexp:"[+-]\\d{3,4}|Z",fn:function(e,t){"Z"===t&&(t=0);var n=Math.abs(t),r=(t>0?-1:1)*(n%100+60*Math.floor(n/100));e.setUTCMinutes(e.getUTCMinutes()+r)}}],i=c.reduce((function(e,t){return t.pattern.test(e.regexp)?(t.index=e.regexp.match(t.pattern).index,e.regexp=e.regexp.replace(t.pattern,"("+t.regexp+")")):t.index=-1,e}),{regexp:t,index:[]}),u=c.filter((function(e){return e.index>-1}));u.sort((function(e,t){return e.index-t.index}));var o=new RegExp(i.regexp).exec(n);if(o){var l=r||e.exports.now();return u.forEach((function(e,t){e.fn(l,o[t+1])})),l}throw new Error("String '"+n+"' could not be parsed as '"+t+"'")}(t,n,r)},e.exports.now=function(){return new Date},e.exports.ISO8601_FORMAT="yyyy-MM-ddThh:mm:ss.SSS",e.exports.ISO8601_WITH_TZ_OFFSET_FORMAT="yyyy-MM-ddThh:mm:ss.SSSO",e.exports.DATETIME_FORMAT="dd MM yyyy hh:mm:ss.SSS",e.exports.ABSOLUTETIME_FORMAT="hh:mm:ss.SSS"},657:function(e,t,n){"use strict";var r=n(0),a=n.n(r),c=n(1),s=n(16),i=n(7),u=n(96),o=n(629),l=n.n(o),d=n.p+"static/media/success.d1b6419b.svg",p=n.p+"static/media/undone.a632686c.svg",b=n.p+"static/media/right.462ddd6f.svg",j=n(24),f=n(625),x=n(60);t.a=Object(u.b)("wallet")(Object(u.c)((function(e){var t,n=e.wallet,r=void 0===n?{}:n,u=e.lang,o="dev"!=j.DeriEnv.get()?{pool:"0x19c2655A0e1639B189FB0CF06e02DC0254419D92",bTokenId:"0"}:{pool:"0x54a71Cad29C314eA081b2B0b1Ac25a7cE3b7f7A5",bTokenId:"0"},O=Object(i.useState)(!0),h=Object(s.a)(O,2),m=h[0],g=h[1],v=Object(i.useState)(!0),w=Object(s.a)(v,2),k=w[0],y=w[1],N=Object(i.useState)(!1),S=Object(s.a)(N,2),T=S[0],M=S[1],A=Object(i.useState)(!1),I=Object(s.a)(A,2),E=I[0],_=I[1],R=Object(i.useState)(!1),F=Object(s.a)(R,2),C=F[0],D=F[1],H=Object(i.useState)(!1),U=Object(s.a)(H,2),B=U[0],P=U[1],Z=Object(i.useState)(Object(x.jsx)(f.a,{className:"btn",btnText:u["connect-wallet"]})),J=Object(s.a)(Z,2),W=J[0],Y=J[1],q=Object(i.useState)({one:!1,two:!1,three:!1}),z=Object(s.a)(q,2),L=z[0],G=z[1],K=Object(i.useState)({one:!1,two:!1,three:!1}),Q=Object(s.a)(K,2),V=Q[0],X=Q[1],$=function(){return r&&r.detail&&r.detail.account},ee=function(){var e=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!$()||!o){e.next=5;break}return e.next=3,r.isApproved(o.pool,o.bTokenId);case 3:t=e.sent,g(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(){r.connect()},ne=function(){var e=Object(c.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="/ptoken_airdrop/".concat(r.detail.account,"/has_qualified_balance"),e.next=3,Object(j.fetchRestApi)(t);case 3:n=e.sent,y(n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.getAirdropPTokenWhitelistCount)(r.detail.chainId);case 2:+e.sent>=5e3&&M(!0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=Object(c.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="/ptoken_airdrop/".concat(r.detail.account,"/is_claimed"),e.next=3,Object(j.fetchRestApi)(t);case 3:n=e.sent,_(n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=Object(c.a)(a.a.mark((function e(){var t,n,c,s,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="/ptoken_airdrop/".concat(r.detail.account,"/signin_status"),e.next=3,Object(j.fetchRestApi)(t);case 3:n=e.sent,c=Date.parse(new Date),s=l.a.asString("yyyy-MM-dd",new Date(parseInt(c))),i=[],n.data.map((function(e){var t=!1;e.date==s&&P(e.signin),e.signin&&(t=e.signin,i.push(t))})),i.length&&G({one:i[0],two:i[1],three:i[2]});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),se=function(){var e=Object(c.a)(a.a.mark((function e(){var t,n,c,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.getTradeHistory)(r.detail.chainId,o.pool,r.detail.account,o.bTokenId);case 2:return t=e.sent,e.next=5,Object(j.getTradeHistory)(r.detail.chainId,o.pool,r.detail.account,"1");case 5:n=e.sent,c=t.concat(n),s={},L.three&&(1==c.length?s={one:!0,two:!1,three:!1}:2==c.length?s={one:!0,two:!0,three:!1}:3==c.length&&(s={one:!0,two:!0,three:!0}),X(s));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=Object(c.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k){e.next=3;break}return alert(u["less-bnb"]),e.abrupt("return");case 3:if(!C){e.next=6;break}return alert(u["use-a-new-address"]),e.abrupt("return");case 6:if(!B){e.next=9;break}return alert(u["already-stamped-today"]),e.abrupt("return");case 9:return t="/ptoken_airdrop/".concat(r.detail.account,"/signin"),e.next=12,Object(j.fetchRestApi)(t,{method:"POST"});case 12:if(n=e.sent,ce(),n.success){e.next=19;break}if(0==n.error.indexOf("insufficent\xa0user\xa0balance")){e.next=18;break}return alert(u["less-bnb"]),e.abrupt("return");case 18:alert(u["sign-in-failed"]);case 19:return e.abrupt("return");case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ue=function(){var e=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!C){e.next=3;break}return alert(u["use-a-new-address"]),e.abrupt("return");case 3:if(k){e.next=6;break}return alert(u["less-bnb"]),e.abrupt("return");case 6:return e.next=8,Object(j.airdropPToken)(r.detail.chainId,r.detail.account);case 8:e.sent.success?_(!0):alert["claim-failed"];case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.isUserPTokenExist)(r.detail.chainId,o.pool,r.detail.account);case 2:t=e.sent,D(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),le=function(){var e=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.approve(o.pool,o.bTokenId);case 2:e.sent.success?(g(!0),ee()):(g(!1),alert(u["approve-failed"]));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){$()&&(ee(),oe())}),[r.detail,o]),Object(i.useEffect)((function(){$()&&(ce(),ae(),re(),ne())}),[r.detail]),Object(i.useEffect)((function(){$()&&se()}),[r.detail,E]),Object(i.useEffect)((function(){t=$()?L.three?m?E||T?Object(x.jsx)("a",{className:"btn",target:"_blank",href:"https://app.deri.finance/#/lite",children:u.trade}):Object(x.jsx)(f.a,{className:"btn",btnText:u.claim,click:ue,lang:u}):Object(x.jsx)(f.a,{className:"btn",btnText:u.approve,click:le,lang:u}):Object(x.jsx)(f.a,{className:"btn btn-danger connect",click:ie,btnText:u["sign-in"],lang:u}):Object(x.jsx)(f.a,{className:"btn btn-danger connect",btnText:u["connect-wallet"],click:te,lang:u}),Y(t)}),[r.detail,m,L,C,E,T]),Object(x.jsxs)("div",{className:"signin",children:[Object(x.jsxs)("div",{className:"title",children:[Object(x.jsx)("div",{children:u["title-three"]}),Object(x.jsx)("div",{className:"time",children:u["title-five"]})]}),Object(x.jsxs)("div",{className:"user-tasks",children:[Object(x.jsx)("div",{className:"header",children:u.header}),Object(x.jsxs)("div",{className:"content",children:[Object(x.jsxs)("div",{className:"content-text",children:[Object(x.jsxs)("div",{className:"left",children:[Object(x.jsx)("div",{className:"signin-title",children:u["sign-in"]}),Object(x.jsxs)("div",{className:"signined",children:[L.one?Object(x.jsx)("img",{src:d}):Object(x.jsx)("img",{src:p}),L.two?Object(x.jsx)("img",{src:d}):Object(x.jsx)("img",{src:p}),L.three?Object(x.jsx)("img",{src:d}):Object(x.jsx)("img",{src:p})]})]}),Object(x.jsxs)("div",{className:"center",children:[Object(x.jsx)("div",{className:"point"}),Object(x.jsx)("div",{className:"point"}),Object(x.jsx)("div",{className:"point"}),Object(x.jsx)("div",{className:"claim-ptoken-text",children:u["claim-ptoken"]}),Object(x.jsx)("div",{className:"point"}),Object(x.jsx)("div",{className:"point"}),Object(x.jsx)("div",{className:"right-arr",children:Object(x.jsx)("img",{src:b})})]}),Object(x.jsxs)("div",{className:"right",children:[Object(x.jsx)("div",{className:"signin-title",children:u.trade}),Object(x.jsxs)("div",{className:"signined",children:[V.one?Object(x.jsx)("img",{src:d}):Object(x.jsx)("img",{src:p}),V.two?Object(x.jsx)("img",{src:d}):Object(x.jsx)("img",{src:p}),V.three?Object(x.jsx)("img",{src:d}):Object(x.jsx)("img",{src:p})]})]})]}),Object(x.jsx)("div",{className:"button",children:W})]})]}),Object(x.jsxs)("div",{className:"h2",children:[u["title-one"],Object(x.jsx)("span",{className:"title-num",children:u["title-num"]}),Object(x.jsx)("span",{className:"in-deri",children:u["title-two"]}),Object(x.jsx)("div",{className:"text",children:u["title-frou"]})]}),Object(x.jsxs)("div",{className:"rules",children:[Object(x.jsx)("div",{className:"rules-title",children:u["who-are-eligibles"]}),Object(x.jsx)("div",{className:"text",children:u["rules-one"]}),Object(x.jsx)("div",{className:"text",children:u["rules-two"]}),Object(x.jsx)("div",{className:"text",children:u["rules-three"]}),Object(x.jsx)("div",{className:"rules-title",children:u["how-to-participate"]}),Object(x.jsx)("div",{className:"text",children:u["step-one"]}),Object(x.jsx)("div",{className:"text",children:u["step-two"]}),Object(x.jsx)("div",{className:"text",children:u["step-three"]}),Object(x.jsx)("div",{className:"text",children:u["step-four"]})]})]})})))},732:function(e,t,n){},759:function(e,t,n){"use strict";n.r(t);var r=n(657),a=(n(732),n(60));t.default=function(e){var t=e.lang;return Object(a.jsx)("div",{children:Object(a.jsx)(r.a,{lang:t})})}}}]);
//# sourceMappingURL=23.426e2b8a.chunk.js.map